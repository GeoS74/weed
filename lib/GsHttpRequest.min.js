"use strict"
var GsHttpRequest={query:function(path,data,handler,cache){data=this.createFormData(data,new FormData());cache=cache||!1;this.send(path,data,handler,cache)},correctFieldName:function(current_name,new_name){new_name=new_name.replace(/\s/g,'');if(!current_name.length)return new_name;if(new_name.indexOf('[')>0){return current_name+'['+new_name.slice(0,new_name.indexOf('['))+']'+new_name.slice(new_name.indexOf('['))}else return current_name+'['+new_name+']'},createFormData:function(data,form_data,field_name){field_name=field_name||'';if(typeof data!=='object')return form_data;for(let key in data){if(typeof data[key]=='object'&&data[key]!==null){switch(!0){case data[key]instanceof File:form_data.append(this.correctFieldName(field_name,key),data[key]);continue;case data[key]instanceof FormData:let n=this.correctFieldName(field_name,key);let iterator=data[key].entries();while(!0){let result=iterator.next();if(result.done)break;let val=result.value;if(val[1]instanceof File)
form_data.append(this.correctFieldName('',val[0]),val[1]);else form_data.append(this.correctFieldName(n,val[0]),(val[1]||''))}
continue;default:this.createFormData(data[key],form_data,this.correctFieldName(field_name,key));continue}}else form_data.append(this.correctFieldName(field_name,key),(data[key]||''))}
return form_data},send:function(path,form_data,handler,cache){fetch(path,{method:'POST',headers:{},body:form_data}).then(function(response){return response.json()}).then(function(answer){if(answer.buffer)console.log(answer.buffer);try
{handler(answer.result)}catch(e){console.log(e)}})},}